{% extends "base.html" %}
{% block title %}Statistical Calculator | Isabella's Independent Study{% endblock %}
{% block content %}
<div class="container-fluid align-items-center justify-content-center">
    
    <!-- <h1>Statistical Calculator</h1> -->
    {% if plot %}
    <div class="row">
        <div class="col-md-4">{{ plot|safe }}</div>
        {% if residual_plot %}
        <div class="col-md-4">{{ residual_plot|safe }}</div>
        {% endif %}
        <div class="col-md-4">
            <ul>
                {% for stat in all_stats %}
                <li><strong>{{ stat.name }}</strong>: {{ stat.val }}</li>
                {% endfor %}
            </ul>
        </div>
    </div>
    {% else %}
    <form class="form" action="/" method="POST" name="form">
        <div class="initial-select">
            <h2>Select a Dataset</h2>
            {{ form.dataset }}
        </div>
        <div class="stats">
            <h3>Explanatory Variable</h3>
            {{ form.survey_2020_x }}
            {{ form.redbook_survey_x }}
            <h3>Response Variable</h3>
            {{ form.survey_2020_y }}
            {{ form.redbook_survey_y }}
            <h3>Precision</h3>
            {{ form.decimals }}
            {{ form.submit }}
        </div>
    </form>
    
        {% endif %}
</div>
{% endblock %}
{% block js %}
<script>
$('#data-select-field').on('change', function (e) {
    console.log("here");
    $('.dataset').hide();
    if($("#data-select-field" ).val() == "Survey_2020") {
        $(".2020survey").show();
        console.log("2");
    }
    else if($("#data-select-field" ).val() == "Redbook_Survey") {
        $(".redbooksurvey").show();
        console.log("rbs");
    }
    $(".stats").show();
});

$( document ).ready(function() {
    $('.dataset').hide();
    $(".stats").hide();
    $("#data-select-field option:selected").attr('disabled', 'disabled');
});
</script>
{% endblock %}